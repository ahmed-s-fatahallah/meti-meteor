function e(e,t,n,o){Object.defineProperty(e,t,{get:n,set:o,enumerable:!0,configurable:!0})}function t(e){return e&&e.__esModule?e.default:e}var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},o={},r={},l=n.parcelRequirea92c;null==l&&((l=function(e){if(e in o)return o[e].exports;if(e in r){var t=r[e];delete r[e];var n={id:e,exports:{}};return o[e]=n,t.call(n.exports,n,n.exports),n.exports}var l=new Error("Cannot find module '"+e+"'");throw l.code="MODULE_NOT_FOUND",l}).register=function(e,t){r[e]=t},n.parcelRequirea92c=l),l.register("27Lyk",(function(t,n){var o,r;e(t.exports,"register",(()=>o),(e=>o=e)),e(t.exports,"resolve",(()=>r),(e=>r=e));var l={};o=function(e){for(var t=Object.keys(e),n=0;n<t.length;n++)l[t[n]]=e[t[n]]},r=function(e){var t=l[e];if(null==t)throw new Error("Could not resolve bundle with id "+e);return t}})),l("27Lyk").register(JSON.parse('{"eothL":"index.000ec0b0.js","5gvP2":"start.84b462c6.mp3","jXX44":"win.561dbf0f.mp3","lnKnk":"lose.08a9d0e5.mp3","hu1To":"shake.9d3e358d.mp3","fOBnN":"destroySound.659c323d.mp3","aVhgA":"blue-meteor-nobg.a8e8b44e.png","cuxV2":"yellow-meteor.3ad3aa57.png"}'));var s,i={mainSectionEl:document.querySelector(".main"),gameSectionEl:document.querySelector(".section-game"),heroSectionEl:document.querySelector(".hero-section"),rulesEl:document.querySelector(".rules"),rulesBtn:document.querySelector(".rules-btn"),closeRulesBtn:document.querySelector(".close_rules--btn"),tilesArry:Array.from(document.querySelectorAll(".tile")),turnNumEl:document.querySelector(".turn-num"),meteorsContainerEl:document.querySelector(".meteors-container"),meteorHolderEl:document.querySelector(".meteor-holder"),middleTile:document.querySelector(".middle"),popUp:document.querySelector(".pop-up"),restartBtn:document.querySelector(".restart-btn"),copyRight:document.querySelector(".year"),startPlayingBtn:document.querySelector(".play-btn"),topBtn:document.querySelector(".top-btn"),resetBtn:document.querySelector(".reset-btn"),volumeInputEl:document.querySelector("#volume"),volumeLevelEl:document.querySelector(".volume-level"),volumeMuteEl:document.querySelector("#mute")};s=new URL(l("27Lyk").resolve("5gvP2"),import.meta.url).toString();var u;u=new URL(l("27Lyk").resolve("jXX44"),import.meta.url).toString();var c;c=new URL(l("27Lyk").resolve("lnKnk"),import.meta.url).toString();var a;a=new URL(l("27Lyk").resolve("hu1To"),import.meta.url).toString();var d;d=new URL(l("27Lyk").resolve("fOBnN"),import.meta.url).toString();const m=new Audio(t(s)),p=new Audio(t(u)),y=new Audio(t(c)),v=new Audio(t(a)),f=new Audio(t(d)),E=function(){return Math.trunc(3*Math.random()+3)},h=function(){return(new Date).getFullYear()};var g;g=new URL(l("27Lyk").resolve("aVhgA"),import.meta.url).toString();var L;L=new URL(l("27Lyk").resolve("cuxV2"),import.meta.url).toString();let C,b,S,w,x,A,H,k=E(),B=5;const q=function(e,t){if(b=e.clientX,S=e.clientY,t.classList.contains("yellow")){if(void 0!==A&&void 0!==H)return;A=parseInt(getComputedStyle(t).top),H=parseInt(getComputedStyle(t).left)}void 0!==w&&void 0!==x||(w=parseInt(getComputedStyle(t).top),x=parseInt(getComputedStyle(t).left))},T=function(e,t){let n,o;if(t){if("touchmove"===e.type&&(n=e.touches[0].clientX-b,o=e.touches[0].clientY-S),"mousemove"===e.type&&(n=e.clientX-b,o=e.clientY-S),t.classList.contains("yellow"))return t.style.top=A+o+"px",void(t.style.left=H+n+"px");t.style.top=w+o+"px",t.style.left=x+n+"px"}},R=function(e){e.style.pointerEvents="none",setTimeout((()=>{e.style.top=w+"px",e.style.left=x+"px",e.classList.contains("yellow")&&(e.style.top=A+"px",e.style.left=H+"px"),e.style.pointerEvents="all"}),500)},M=function(e){const t=e.getBoundingClientRect(),n=t.width/2,o=[],[r,l]=_(t),s=document.elementsFromPoint(r,l).filter((e=>e.classList.contains("tile")));if(0===s.length)return;o.push(...s);for(let e=0;e<=360;e++){const[t,s]=I(r,l,n,e);document.elementsFromPoint(t,s).forEach((e=>{e.classList.contains("tile")&&o.push(e)}))}return new Set(o)},_=function(e){const[t,n]=[e.left+e.width/2,e.top+e.height/2];return[t,n]},I=function(e,t,n,o){return[e+n*Math.cos(o*Math.PI/180),t+n*Math.sin(o*Math.PI/180)]},U=function(e){let n="",o=`<div class="meteor blue">\n  <img src="${t(g)}" alt="blue meteor image" />\n</div>\n`;for(let t=0;t<e;t++)n+=o;return n};C=U(k);const O=function(e){return e.querySelectorAll(".meteor").length?{turnsCount:B}:(B--,3===B?{turnsCount:B,meteorsHTML:`<div class="meteor yellow">\n      <img class= "yellow-inner" src="${t(L)}" alt="yellow meteor image" />\n    </div>`}:(k=E(),C=U(k),{turnsCount:B,meteorsHTML:C}))},P=function(e,t){let n=0;return!!t.classList.contains("destroyed")||(e.forEach((e=>{e.classList.contains("destroyed")&&n++})),n>=4||void 0)},F=function(e){return B=5,k=E(),C=U(k),e.forEach((e=>{e.classList.contains("destroyed")&&e.classList.remove("destroyed"),e.firstElementChild.textContent=3,e.style.borderColor="rgb(54, 48, 158)",e.classList.contains("middle")&&(e.firstElementChild.textContent=4)})),{turnsCount:B,meteorsHTML:C}},N=function(e,t){e&&e.forEach((e=>{let n=+e.firstElementChild.textContent;e.classList.add("shake"),setTimeout((()=>{e.classList.remove("shake")}),800),t.classList.contains("yellow")?e.firstElementChild.textContent=n-3:e.firstElementChild.textContent=n-1,2==+e.firstElementChild.textContent&&(e.style.borderColor="rgb(255,215,0)",v.play()),1==+e.firstElementChild.textContent&&(e.style.borderColor="rgb(255,0,0)",v.play()),+e.firstElementChild.textContent<=0&&(e.classList.add("destroyed"),f.play())}))},D=function(e,t){i.turnNumEl.textContent=t?"GAME OVER":`Turn: ${e}`},j=function(e){i.meteorsContainerEl.insertAdjacentHTML("afterbegin",e),i.meteorHolderEl.insertAdjacentElement("afterbegin",i.meteorsContainerEl.firstChild),i.meteorHolderEl.firstChild.classList.add("move")};let Y,X,V=50;const W=function(e,t,n,o){const r=r=>{let l;if("touchend"===r.type&&r.targetTouches.length>1||"mouseup"===r.type&&0!==r.button)return;if("mouseup"===r.type&&r.preventDefault(),Y=!1,!X)return;const s=t(X);if(!s)return void e(X);i.startPlayingBtn.textContent="CONTINUE",i.resetBtn.style.visibility="visible",i.resetBtn.style.pointerEvents="all",N(s,X),X.remove(),i.meteorsContainerEl.querySelectorAll(".meteor").length&&(i.meteorHolderEl.insertAdjacentElement("afterbegin",i.meteorHolderEl.previousElementSibling),i.meteorHolderEl.firstChild.classList.add("move"));let u=n(i.meteorsContainerEl);const c=o(i.tilesArry,i.middleTile);if(c||0===u.turnsCount)return a=c,d=u.turnsCount,l=a?(i.popUp.firstChild.textContent="YOU LOST ðŸ˜žðŸ˜”",i.restartBtn.style.backgroundColor="rgba(255, 0, 0, 0.8)",i.restartBtn.style.borderColor="rgba(255, 0, 0, 0)",i.popUp.showModal(),y.play(),!0):d<=0&&!a?(i.popUp.firstChild.textContent="YOU WON ðŸŽ‰ðŸŽ‰",i.restartBtn.style.backgroundColor="rgba(0, 145, 0, 0.8)",i.restartBtn.style.borderColor="rgba(255, 0, 0, 0)",i.popUp.showModal(),p.play(),!0):void 0,void D(u.turnsCount,l);var a,d;u.meteorsHTML&&(j(u.meteorsHTML),D(u.turnsCount,l))};["mouseup","touchend"].forEach((e=>{document.addEventListener(e,r)}))};var $,K,G,J;$=h,i.copyRight.textContent=$(),j(C),function(e){const t=t=>{"touchdown"===t.type&&t.targetTouches.length>1||"mousedown"===t.type&&0!==t.button||(X=t.target.closest(".move"),X&&("mousedown"===t.type&&(t.preventDefault(),e(t,X)),"touchstart"===t.type&&e(t.touches[0],X),Y=!0))};["mousedown","touchstart"].forEach((e=>{document.addEventListener(e,t)}))}(q),function(e){const t=t=>{"touchmove"===t.type&&t.targetTouches.length>1||"mousemove"===t.type&&0!==t.button||Y&&e(t,X)};["mousemove","touchmove"].forEach((e=>{document.addEventListener(e,t)}))}(T),W(R,M,O,P),D(B),i.startPlayingBtn.addEventListener("click",(e=>{e.preventDefault(),window.scrollTo(0,document.body.scrollHeight),m.play()})),i.rulesBtn.addEventListener("click",(e=>{e.preventDefault(),i.rulesEl.showModal()})),i.closeRulesBtn.addEventListener("click",(e=>{e.preventDefault(),i.rulesEl.close()})),i.topBtn.addEventListener("click",(e=>{e.preventDefault(),window.scrollTo(0,0),m.pause()})),K=i.heroSectionEl,G=i.topBtn,new IntersectionObserver((e=>{e.forEach((e=>{e.isIntersecting?G.style.display="none":G.style.display="block"}))}),{root:null,threshold:.3}).observe(K),function(e){const t=t=>{if("keydown"===t.type&&"Escape"!==t.key||"click"===t.type&&0!==t.button)return;t.preventDefault(),i.resetBtn.style.visibility="hidden",i.resetBtn.style.pointerEvents="none",i.popUp.close();const{turnsCount:n,meteorsHTML:o}=e(i.tilesArry);i.meteorsContainerEl.querySelectorAll(".meteor").forEach((e=>{e.remove()})),D(n),j(o),m.play(),i.startPlayingBtn.textContent="PLAY NOW"};i.restartBtn.addEventListener("click",t),i.popUp.addEventListener("keydown",t)}(F),J=F,i.resetBtn.addEventListener("click",(e=>{e.preventDefault(),i.resetBtn.style.visibility="hidden",i.resetBtn.style.pointerEvents="none";const{turnsCount:t,meteorsHTML:n}=J(i.tilesArry);i.meteorsContainerEl.querySelectorAll(".meteor").forEach((e=>{e.remove()})),m.play(),i.startPlayingBtn.textContent="PLAY NOW",D(t),j(n)})),[m,v,f,p,y].forEach((e=>{e.volume=.5})),document.addEventListener("input",(e=>{if(e.target===i.volumeInputEl)return V=i.volumeLevelEl.value=e.target.value,void[m,v,f,p,y].forEach((e=>{e.volume=V/100}));i.volumeMuteEl.checked?(i.volumeLevelEl.value=i.volumeInputEl.value=0,i.volumeInputEl.style.pointerEvents="none",i.volumeInputEl.tabIndex=-1):(i.volumeLevelEl.value=i.volumeInputEl.value=V,i.volumeInputEl.style.pointerEvents="all",i.volumeInputEl.tabIndex=0),[m,v,f,p,y].forEach((e=>{e.volume=i.volumeLevelEl.value/100}))}));
//# sourceMappingURL=index.000ec0b0.js.map
